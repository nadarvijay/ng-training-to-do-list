<div class="task-table">
    <table aria-multiselectable="true"
        class="slds-table slds-table_bordered slds-table_fixed-layout slds-table_resizable-cols" role="grid"
        aria-label="Table View of To Do List">
        <thead>
            <tr class="slds-line-height_reset">
                <th class="slds-text-align_right slds-cell_action-mode" scope="col" style="width:3.25rem">
                    <span id="column-group-header" class="slds-assistive-text">Choose a row</span>
                    <div class="slds-th__action slds-th__action_form">
                        <div class="slds-checkbox">
                            <input type="checkbox" name="options" id="checkbox-unique-id-293"
                                value="checkbox-unique-id-293" tabindex="0"
                                aria-labelledby="check-select-all-label column-group-header" />
                            <label class="slds-checkbox__label" for="checkbox-unique-id-293"
                                id="check-select-all-label">
                                <span class="slds-checkbox_faux"></span>
                                <span class="slds-form-element__label slds-assistive-text">Select All</span>
                            </label>
                        </div>
                    </div>
                </th>
                <th aria-sort="none" class="slds-is-resizable slds-is-sortable slds-cell_action-mode" scope="col">
                    <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                        <span class="slds-assistive-text">Sort by: </span>
                        <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                            <span class="slds-truncate" title="Assigned To">Assigned To</span>
                            <span class="slds-icon_container slds-icon-utility-arrowdown">
                                <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                    aria-hidden="true">
                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown"></use>
                                </svg>
                            </span>
                        </div>
                    </a>
                    <div class="slds-resizable">
                        <input type="range" aria-label="Assigned To column width"
                            class="slds-resizable__input slds-assistive-text" id="cell-resize-handle-533" max="1000"
                            min="20" tabindex="0" />
                        <span class="slds-resizable__handle">
                            <span class="slds-resizable__divider"></span>
                        </span>
                    </div>
                </th>
                <th aria-sort="none" class="slds-is-resizable slds-is-sortable slds-cell_action-mode" scope="col">
                    <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                        <span class="slds-assistive-text">Sort by: </span>
                        <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                            <span class="slds-truncate" title="Status">Status</span>
                            <span class="slds-icon_container slds-icon-utility-arrowdown">
                                <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                    aria-hidden="true">
                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown"></use>
                                </svg>
                            </span>
                        </div>
                    </a>
                    <div class="slds-resizable">
                        <input type="range" aria-label="Status column width"
                            class="slds-resizable__input slds-assistive-text" id="cell-resize-handle-534" max="1000"
                            min="20" tabindex="0" />
                        <span class="slds-resizable__handle">
                            <span class="slds-resizable__divider"></span>
                        </span>
                    </div>
                </th>
                <th aria-sort="none" class="slds-is-resizable slds-is-sortable slds-cell_action-mode" scope="col">
                    <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                        <span class="slds-assistive-text">Sort by: </span>
                        <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                            <span class="slds-truncate" title="Due Date">Due Date</span>
                            <span class="slds-icon_container slds-icon-utility-arrowdown">
                                <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                    aria-hidden="true">
                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown"></use>
                                </svg>
                            </span>
                        </div>
                    </a>
                    <div class="slds-resizable">
                        <input type="range" aria-label="Due Date column width"
                            class="slds-resizable__input slds-assistive-text" id="cell-resize-handle-535" max="1000"
                            min="20" tabindex="0" />
                        <span class="slds-resizable__handle">
                            <span class="slds-resizable__divider"></span>
                        </span>
                    </div>
                </th>
                <th aria-sort="none" class="slds-is-resizable slds-is-sortable slds-cell_action-mode" scope="col">
                    <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                        <span class="slds-assistive-text">Sort by: </span>
                        <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                            <span class="slds-truncate" title="Priority">Priority</span>
                            <span class="slds-icon_container slds-icon-utility-arrowdown">
                                <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                    aria-hidden="true">
                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown"></use>
                                </svg>
                            </span>
                        </div>
                    </a>
                    <div class="slds-resizable">
                        <input type="range" aria-label="Priority column width"
                            class="slds-resizable__input slds-assistive-text" id="cell-resize-handle-536" max="1000"
                            min="20" tabindex="0" />
                        <span class="slds-resizable__handle">
                            <span class="slds-resizable__divider"></span>
                        </span>
                    </div>
                </th>

                <th aria-sort="none" class="slds-is-resizable slds-is-sortable slds-cell_action-mode" scope="col">
                    <a class="slds-th__action slds-text-link_reset" href="#" role="button" tabindex="0">
                        <span class="slds-assistive-text">Sort by: </span>
                        <div class="slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate">
                            <span class="slds-truncate" title="Comments">Comments</span>
                            <span class="slds-icon_container slds-icon-utility-arrowdown">
                                <svg class="slds-icon slds-icon-text-default slds-is-sortable__icon "
                                    aria-hidden="true">
                                    <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#arrowdown"></use>
                                </svg>
                            </span>
                        </div>
                    </a>
                    <div class="slds-resizable">
                        <input type="range" aria-label="Comments column width"
                            class="slds-resizable__input slds-assistive-text" id="cell-resize-handle-536" max="1000"
                            min="20" tabindex="0" />
                        <span class="slds-resizable__handle">
                            <span class="slds-resizable__divider"></span>
                        </span>
                    </div>
                </th>
                <th class="slds-cell_action-mode" scope="col" style="width:3.25rem">
                    <div class="slds-truncate slds-assistive-text" title="Actions">Actions</div>
                </th>
            </tr>
        </thead>
        <tbody>
            @for (task of tasks; track task.id) {
            <tr aria-selected="false" class="slds-hint-parent">
                <td class="slds-text-align_right slds-cell_action-mode" role="gridcell">
                    <div class="slds-checkbox">
                        <input type="checkbox" [id]="'checkbox-' + task.id" [value]="task.id" tabindex="0"
                            [attr.aria-labelledby]="'check-label-' + task.id + ' column-group-header'" />

                        <label class="slds-checkbox__label" [for]="'checkbox-' + task.id"
                            [id]="'check-label-' + task.id">
                            <span class="slds-checkbox_faux"></span>
                            <span class="slds-form-element__label slds-assistive-text">
                                Select task {{ task.id }}
                            </span>
                        </label>
                    </div>
                </td>
                <th class="slds-cell_action-mode" scope="row">
                    <div class="slds-truncate" [title]="task.assignedTo">
                        <a href="#" tabindex="0">{{ task.assignedTo }}</a>
                    </div>
                </th>
                <td class="slds-cell_action-mode" role="gridcell">
                    <div class="slds-truncate" [title]="task.status">
                        {{ task.status }}
                    </div>
                </td>
                <td class="slds-cell_action-mode" role="gridcell">
                    <div class="slds-truncate" [title]="task.dueDate">
                        {{ task.dueDate }}
                    </div>
                </td>
                <td class="slds-cell_action-mode" role="gridcell">
                    <div class="slds-truncate" [title]="task.priority">
                        {{ task.priority }}
                    </div>
                </td>
                <td class="slds-cell_action-mode" role="gridcell">
                    <div class="slds-truncate" [title]="task.comments">
                        {{ task.comments }}
                    </div>
                </td>
                <td class="slds-cell_action-mode" role="gridcell">
                    <button class="slds-button slds-button_icon slds-button_icon-border-filled slds-button_icon-x-small"
                        aria-haspopup="true" tabindex="0" [title]="'More Actions for '+task.assignedTo"
                        (click)="openMenu($event, task)">
                        <svg class="slds-button__icon slds-button__icon_hint slds-button__icon_small"
                            aria-hidden="true">
                            <use xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#down"></use>
                        </svg>
                        <span class="slds-assistive-text">{{"More actions for "+task.assignedTo}}</span>
                    </button>
                </td>

            </tr>
            }
        </tbody>
    </table>
</div>

<div #dropdownMenu *ngIf="showMenu" class="slds-dropdown slds-dropdown_right slds-dropdown_actions"
    [ngStyle]="{ top: dropdownPosition.top, left: dropdownPosition.left }" style="position: fixed; z-index: 1000;">

    <ul class="slds-dropdown__list" role="menu">
        <li class="slds-dropdown__item" role="presentation">
            <a role="menuitem" (click)="editTask(selectedTask)">
                <span class="slds-truncate">Edit</span>
            </a>
        </li>

        <li class="slds-dropdown__item" role="presentation">
            <a role="menuitem" class="delete-item" (click)="deleteTask(selectedTask)">
                <span class="slds-truncate">Delete</span>
            </a>
        </li>
    </ul>
</div>